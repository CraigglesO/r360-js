<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Leaflet vs. Google Maps</title>
    <style>
      html, body {
        height: 100%;
        margin: 0px;
        padding: 0px
      }


      #google-maps-color-map, #google-maps-bw-map {

        width: 50%;
        height: 50%;
        float: left;
      }

      #leaflet-color-map, #leaflet-bw-map {

        width: 50%;
        height: 50%;
        float: left;
      }

    </style>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" />
    <script src="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet-src.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>
    <script type="text/javascript" src="../../spec/dummydata/transit-polygon.js"></script>
    <script type="text/javascript" src="../../lib/build/deps.js"></script>
    <script type="text/javascript" src="../../lib/build/r360-include.js"></script>
    <script type="text/javascript">

        $(document).ready(function(){

            function initGoogle() {

                var colorMap = new google.maps.Map(document.getElementById('google-maps-color-map'), { 
                    zoom: 11, center: new google.maps.LatLng(52.5167, 13.3833), mapTypeId: google.maps.MapTypeId.STREETS });
                
                var bwMap = new google.maps.Map(document.getElementById('google-maps-bw-map'), { 
                    zoom: 11, center: new google.maps.LatLng(52.5167, 13.3833), mapTypeId: google.maps.MapTypeId.STREETS });

                var colorPolygonLayer = new GoogleMapsPolygonLayer(colorMap, r360.Util.parsePolygons(transitPolygon));
                google.maps.event.addDomListener(colorMap, 'dragend', function(){ colorPolygonLayer.draw(); });

                // var bwPolygonLayer = new GoogleMapsPolygonLayer(bwMap, r360.Util.parsePolygons(transitPolygon), { inverse : true });
                // google.maps.event.addDomListener(bwMap, 'dragend', function(){ bwPolygonLayer.draw(); });
            }

            function initLeaflet() {

                var colorMap  = L.map('leaflet-color-map').setView([52.5167, 13.3833], 11);
                var tileLayer = L.tileLayer('https://a.tiles.mapbox.com/v3/mi.0ad4304c/{z}/{x}/{y}.png', {
                    maxZoom: 22, attribution: "Powered by leaflet and openstreetmaps" }).addTo(colorMap);

                var polygonLayer  = r360.route360PolygonLayer().addTo(colorMap);
                polygonLayer.clearAndAddLayers(r360.Util.parsePolygons(transitPolygon));

                var bwMap     = L.map('leaflet-bw-map').setView([52.5167, 13.3833], 11);
                var tileLayer = L.tileLayer('https://a.tiles.mapbox.com/v3/mi.0ad4304c/{z}/{x}/{y}.png', {
                    maxZoom: 22, attribution: "Powered by leaflet and openstreetmaps" }).addTo(bwMap);

                // var polygonLayer  = r360.route360PolygonLayer().addTo(bwMap);
                // polygonLayer.setInverse(true);
                // polygonLayer.clearAndAddLayers(r360.Util.parsePolygons(transitPolygon));
            }

            initGoogle();
            initLeaflet();
        });
    </script>
  </head>
  <body>
    <div id="google-maps-color-map"></div>
    <div id="google-maps-bw-map"></div>
    <div id="leaflet-color-map"></div>
    <div id="leaflet-bw-map"></div>
  </body>
</html>