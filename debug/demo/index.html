<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Route360° JavaScript API - Leaflet plugin for online network analysis</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="css/freelancer.css" rel="stylesheet" type="text/css">
    <link href="css/prettify.css" rel="stylesheet" type="text/css">

    <!-- Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>

    <!-- IE8 support for HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <link rel="stylesheet" href="css/demo.css"/>
    <link rel="stylesheet" href="lib/leaflet/leaflet.css"/>
    <link rel="stylesheet" href="lib/jquery/jquery-ui-1.10.0.custom.css"/>
    <link rel="stylesheet" href="css/r360.css"/>
</head>

<body id="page-top" class="index">

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#page-top">Route360° JavaScript API</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li class="page-scroll">
                        <a href="#gettingStarted">Getting started</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#tutorials">Tutorials</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#about">About</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#contact">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

    <header>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <img class="img-responsive" src="img/profile.png" alt="">
                    <div class="intro-text">
                        <span class="name">Route360° JavaScript API</span>
                        <hr class="star-light">
                        <span class="skills">Large Geographic Network Analysis - Route Planning - Visualization</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section id="gettingStarted">
        <div class="container">
            <div class="col-lg-12 text-center">
                <h2>Getting started</h2>
                <hr class="star-primary">
            </div>
            <p style="text-align:justify;">The Route360° JavaScript API is a modern open-source JavaScript library designed for Leaflet's mobile-friendly interactive maps. It is developed by Henning Hollburg and Daniel Gerber from the Motion Intelligence GmbH. <br> The API is free of charge and can be altered and forked as you wish. Since this API makes requests to the Route360° Webservice you need to contact us to get your application key. We provide a development version of the Route360° Webservice, which can be used for development purposes only, but we do not guarantee service uptime at any point.</p>
            <h3>Lets add some polygons</h3>
            <p>This basic example shows you how to add a marker to the map and display reachability polygons from this location. Note that we do not set a travel mode, this defaults to 'bike' for now.</p>
            <p>First we need to import all the necessary javascript and css files. You should download the Route360° JS API from the <a href="https://bitbucket.org/Yojimbo/motion_intelligence.r360_js">repository</a>. For jQuery and jQuery UI we strongly advise you to use the <a href="http://jquery-ui-bootstrap.github.io/jquery-ui-bootstrap/">jQuery UI Bootstrap</a> library. Leaflet can be found <a href="http://leafletjs.com/">here</a>, Rapheal.js can be found <a href="http://raphaeljs.com/">here</a>.</p>
            <p>In the future, we plan to release the Route360° JavaScript API as a bower component. Please be patient. :)</p>
<pre class="prettyprint">
// all the css stuff
&lt;link rel=&quot;stylesheet&quot; href=&quot;css/r360.css&quot;/&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;lib/leaflet/leaflet.css&quot;/&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;lib/jquery/jquery-ui-1.9.2.custom.css&quot;/&gt;
// we need jquery and jquery ui
&lt;script src=&quot;lib/jquery/jquery-1.8.3.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;lib/jquery/jquery-ui-1.9.2.custom.min.js&quot;&gt;&lt;/script&gt;
// leaflet is used as the base map technology
&lt;script src=&quot;lib/leaflet/leaflet.js&quot;&gt;&lt;/script&gt;
// our favourite utility belt
&lt;script src=&quot;js/underscore.js&quot;&gt;&lt;/script&gt;
// used to create transparent polygon layers
&lt;script src=&quot;js/raphael-min.js&quot;&gt;&lt;/script&gt;
// last but not least, our library
&lt;script src=&quot;r360.js&quot;&gt;&lt;/script&gt;
</pre>

            <p>Secondly we are initializing the Leaflet map, set a tile layer and add a marker, which could be an appartment, a hotel or your store etc.:</p>
<pre class="prettyprint">
// add the map and set the initial center to berlin
var map = L.map('map').setView([52.516389, 13.377778], 13);
// attribution to give credit to OSM map data and VBB for public transportation 
var attribution ="&lt;a href='https://www.mapbox.com/about/maps/' target='_blank'&gt;&copy; Mapbox &copy; OpenStreetMap&lt;/a&gt; | &Ouml;PNV Daten &copy; &lt;a href='http://www.vbb.de/de/index.html' target='_blank'&gt;VBB&lt;/a&gt; | developed by &lt;a href='http://www.route360.net/de/' target='_blank'&gt;Route360&deg;&lt;/a&gt;";

 // initialising the base map. To change the base map just change following lines as described by cloudmade, mapbox etc..
L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: attribution
}).addTo(map);

// create a marker and add it to the map (make sure to fix the icon urls)
var marker = L.marker([52.51, 13.37], {icon : L.icon({iconUrl: 'img/marker-icon.png', shadowUrl: 'img/marker-shadow.png', iconAnchor: [12,45]})});
marker.addTo(map);
</pre>
            <p>No we add a layer for the reachability polygons, call the Route360° Webservice and render the resulting polygons on the map:</p>
<pre class="prettyprint">
// set the service url, note that this is a development/testing endpoint only
// we do not guarantuee service uptime at any point
r360.config.serviceUrl = 'http://144.76.246.52:8080/api/';

// create the layer to add the polygons
var cpl = r360.route360PolygonLayer();
// add it to the map
map.addLayer(cpl);

// you need to define some options for the polygon service
// for more travel options check out the other tutorials
var travelOptions = {
    // we only have one source which is the marker we just added
    sources : [marker],
    // we want to have polygons for 10 minutes and 20 minutes
    travelTimes : [600,1200]
};

// call the service
r360.PolygonService.getTravelTimePolygons(travelOptions, function(polygons){
        
        // add the returned polygons to the polygon layer 
        cpl.addLayer(polygons);
        
        // zoom the map to fit the polygons perfectly
        map.fitBounds(cpl.getBoundingBox());
}); 
</pre>
            <p>Easy, right? You should see something like this:
                <div id="map-example1"></div>
            </p>
            

        </div>
    </section>

    <section class="tutorials" id="tutorials">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Tutorials</h2>
                    <hr class="star-light">
                </div>
            </div>
            <div class="row">
                <div class="container">
                    <div class="col-lg-2">
                        <ul id="menu" class="nav nav-pills nav-stacked">
                            <li><a href="#traveltimecontrol">Travel time control</a></li>
                            <li><a href="#traveltypecontrol">Travel type control</a></li>
                            <li><a href="#travelstartdatecontrol">Travel date and time of day control</a></li>
                            <li><a href="#geocodingcontrol">Route360° geocoding service</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-10">
                        <div id="traveltimecontrol">
                            <h3>Adding a travel time control</h3>
                            <p>In this tutorial, we will show you how to add a <code>TravelTimeControl</code> to the map and add behaviour to it, so that users can select different travel times and the map is automatically updated with larger or smaller (timely speaking) polygons. This tutorial builds up on the getting started section, so if you haven't done this already, go ahead and show some polygons! In any case, enjoy!</p>
                            <div id="map-addTravelTimeControlExample"></div>
                            <p>And the code with explanations:</p>
                            <pre class="prettyprint" id="addTravelTimeControlExample"></pre>
                        </div>
                        <div class="tutorial" id="traveltypecontrol">
                            <h3>Adding a travel type control</h3>
                            <p>In this tutorial, we will show you how to add a <code>RadioButtonControl</code> to the map and add behaviour to it, so that users can select different travel type, like bike, car or walk, and the map is automatically updated with the calculated polygons. You can use this <code>RadioButtonControl</code> for anything you want, e.g. select different travel speeds for fast or slow bikers.</p>
                            <div id="map-addTravelTypeControlExample"></div>
                            <p>And the code with explanations:</p>
                            <pre class="prettyprint" id="addTravelTypeControlExample"></pre>                            
                        </div>
                        <div class="tutorial" id="travelstartdatecontrol">
                            <h3>Adding a travel start date and time control for public transportation</h3>
                            <p>I this tutorial, we will examplify how to display polygons for public transportation. Since public transportation is time and date dependent, it follows a given schedule, we need a way to select the time and date the user wants to travel. There are two controls, the  <code>TravelStartTimeControl</code> and <code>TravelStartDateControl</code> which are able to do just that. Since those polygon request, especially for routing times close to 2 hours, might take some time, we also add a <code>WaitControl</code> to the map. So here is the result of this tutorial: </p>
                            <div id="map-addTravelStartDateControlExample"></div>
                            <p>And the code with explanations:</p>
                            <pre class="prettyprint" id="addTravelStartDateControlExample"></pre>                            
                        </div>
                        <div class="tutorial" id="geocodingcontrol">
                            <h3>Adding place autocompletion for variable source points</h3>
                            <p>In this tutorial we will show you how to use the Route360° geocoding service to be able to let users enter for example there home address. We will add a <code>PlaceAutoCompleteControl</code> to the map and bind an action to add or move the marker as well as clearing already shown polygons. The <code>PlaceAutoCompleteControl</code> also offers the ability to add to buttons to it. One button is used to delete already made user inputs and the other should be used to switch source and target for a routing request. Both of these examples will be covered in another tutorial.</p>
                            <div id="map-addPlaceAutoCompleteControlExample"></div>
                            <p>And the code with explanations:</p>
                            <pre class="prettyprint" id="addPlaceAutoCompleteControlExample"></pre>                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <section class="success" id="about">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>About</h2>
                    <hr class="star-light">
                </div>
            </div>
            <div class="row">
                <div class="col-lg-4 col-lg-offset-2">
                    <p>Freelancer is a free bootstrap theme created by Start Bootstrap. The download includes the complete source files including HTML, CSS, and JavaScript as well as optional LESS stylesheets for easy customization.</p>
                </div>
                <div class="col-lg-4">
                    <p>Whether you're a student looking to showcase your work, a professional looking to attract clients, or a graphic artist looking to share your projects, this template is the perfect starting point!</p>
                </div>
                <div class="col-lg-8 col-lg-offset-2 text-center">
                    <a href="#" class="btn btn-lg btn-outline">
                        <i class="fa fa-download"></i> Download Theme
                    </a>
                </div>
            </div>
        </div>
    </section>

    <section id="contact">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Contact Me</h2>
                    <hr class="star-primary">
                </div>
            </div>
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2">
                    <form role="form">
                        <div class="row">
                            <div class="form-group col-xs-12 floating-label-form-group">
                                <label for="name">Name</label>
                                <input class="form-control" type="text" name="name" placeholder="Name">
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-xs-12 floating-label-form-group">
                                <label for="email">Email Address</label>
                                <input class="form-control" type="email" name="email" placeholder="Email Address">
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-xs-12 floating-label-form-group">
                                <label for="message">Message</label>
                                <textarea placeholder="Message" class="form-control" rows="5"></textarea>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="form-group col-xs-12">
                                <button type="submit" class="btn btn-lg btn-success">Send</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <footer class="text-center">
        <div class="footer-above">
            <div class="container">
                <div class="row">
                    <div class="footer-col col-md-4">
                        <h3>Location</h3>
                        <p>3481 Melrose Place
                            <br>Beverly Hills, CA 90210</p>
                    </div>
                    <div class="footer-col col-md-4">
                        <h3>Around the Web</h3>
                        <ul class="list-inline">
                            <li><a href="#" class="btn-social btn-outline"><i class="fa fa-fw fa-facebook"></i></a>
                            </li>
                            <li><a href="#" class="btn-social btn-outline"><i class="fa fa-fw fa-google-plus"></i></a>
                            </li>
                            <li><a href="#" class="btn-social btn-outline"><i class="fa fa-fw fa-twitter"></i></a>
                            </li>
                            <li><a href="#" class="btn-social btn-outline"><i class="fa fa-fw fa-linkedin"></i></a>
                            </li>
                            <li><a href="#" class="btn-social btn-outline"><i class="fa fa-fw fa-dribbble"></i></a>
                            </li>
                        </ul>
                    </div>
                    <div class="footer-col col-md-4">
                        <h3>About Freelance</h3>
                        <p>Freelance is a free to use, open source Bootstrap theme created by <a href="http://startbootstrap.com">Start Bootstrap</a>.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-below">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        Copyright &copy; 2014 - Your Name
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <div class="scroll-top page-scroll visible-xs visble-sm">
        <a class="btn btn-primary" href="#page-top">
            <i class="fa fa-chevron-up"></i>
        </a>
    </div>

    <script src="lib/jquery/jquery-1.10.2.js"></script>
    <!-- // <script src="js/bootstrap.min.js"></script> -->
    <script src="lib/jquery/jquery-ui-1.10.4.min.js"></script>
    
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script src="js/classie.js"></script>
    <script src="js/cbpAnimatedHeader.js"></script>
    <script src="js/freelancer.js"></script>
    <script src="js/prettify.js"></script>
    <script src="lib/leaflet/leaflet.js"></script>
    <script src="js/underscore.js"></script>
    <script src="js/raphael-min.js"></script>
    <script src="js/g.raphael-min.js"></script>
    <script src="js/g.line-min.js"></script>

    <script type="text/javascript" src="../../build/deps.js"></script>
    <script src="../r360-include.js"></script>

    <!-- Code for example 1 -->
    <script type="text/javascript">
        $(document).ready(function(){

            // add the map and set the initial center to berlin
            var map = L.map('map-example1').setView([52.51, 13.37], 13);
            // attribution to give credit to OSM map data and VBB for public transportation 
            var attribution ="<a href='https://www.mapbox.com/about/maps/' target='_blank'>© Mapbox © OpenStreetMap</a> | ÖPNV Daten © <a href='http://www.vbb.de/de/index.html' target='_blank'>VBB</a> | developed by <a href='http://www.route360.net/de/' target='_blank'>Route360°</a>";

             // initialising the base map. To change the base map just change following lines as described by cloudmade, mapbox etc..
            L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
                    maxZoom: 18,
                    attribution: attribution
            }).addTo(map);

            // create a marker and add it to the map
            var marker = L.marker([52.51, 13.37]);
            marker.addTo(map);

            // set the service url, note that this is a development/testing endpoint only
            // we do not guarantuee service uptime at any point
            // r360.config.serviceUrl = 'http://144.76.246.52:8080/api/';

            // create the layer to add the polygons
            var cpl = r360.route360PolygonLayer();
            // add it to the map
            map.addLayer(cpl);

            // you need to define some options for the polygon service
            // for more travel options check out the other tutorials
            var travelOptions = {
                // we only have one source which is the marker we just added
                sources : [marker],
                // we want to have polygons for 10 minutes and 20 minutes
                travelTimes : [1200,2400]
            };

            // call the service
            r360.PolygonService.getTravelTimePolygons(travelOptions, function(polygons){
                    
                    // add the returned polygons to the polygon layer 
                    cpl.addLayer(polygons);
                    
                    // zoom the map to fit the polygons perfectly
                    map.fitBounds(cpl.getBoundingBox());
            });
        });
    </script>

    <!-- Code for example 2 -->
    <script type="text/javascript">
        $(document).ready(function(){

            addTravelTimeControl();
            $('#addTravelTimeControlExample').text(addTravelTimeControl.toString());

            addTravelTypeControl();
            $('#addTravelTypeControlExample').text(addTravelTypeControl.toString());

            addTravelStartDateControl();
            $('#addTravelStartDateControlExample').text(addTravelStartDateControl.toString());

            addPlaceAutoCompleteControl();
            $('#addPlaceAutoCompleteControlExample').text(addPlaceAutoCompleteControl.toString());

            !function ($) { $(function(){ window.prettyPrint && prettyPrint() })}(window.jQuery);

// ----------------------------------------------------------------------------------------------------------------
// ----------------------------------------------------------------------------------------------------------------
// ----------------------------------------------------------------------------------------------------------------
// ----------------------------------------------------------------------------------------------------------------

function addTravelTimeControl(){

    // add the map and set the initial center to berlin
    var map = L.map('map-addTravelTimeControlExample').setView([52.51, 13.37], 13);

    // attribution to give credit to OSM map data and VBB for public transportation 
    var attribution ="<a href='https://www.mapbox.com/about/maps/' target='_blank'>© Mapbox © OpenStreetMap</a> | ÖPNV Daten © <a href='http://www.vbb.de/de/index.html' target='_blank'>VBB</a> | developed by <a href='http://www.route360.net/de/' target='_blank'>Route360°</a>";

     // initialising the base map. To change the base map just change following lines as described by cloudmade, mapbox etc..
    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: attribution
    }).addTo(map);

    // create a marker and add it to the map
    var marker = L.marker([52.51, 13.37]);
    marker.addTo(map);

    // set the service url, note that this is a development/testing endpoint only
    // we do not guarantuee service uptime at any point
    // r360.config.serviceUrl = 'http://144.76.246.52:8080/api/';

    // create the layer to add the polygons
    var cpl = r360.route360PolygonLayer();
    // add it to the map
    map.addLayer(cpl);

    // define time steps and colors here. Always use time values of the same distance and not too much time. 
    // the maximum travel time size is 2 hours, 7200s respectivly, higher values will be blocked be the server
    // travel times are defined in seconds the initial values in minutes... Also the label may be altered here
    var travelTimeControl       = r360.travelTimeControl({
        travelTimes     : [
            { time : 1200 , color : "#006837"},
            { time : 2400 , color : "#39B54A"},
            { time : 3600 , color : "#8CC63F"}
        ],
        position : 'topright', // this is the position in the map
        label: 'Travel time: ', // the label, customize for i18n
        initValue: 40 // the inital value has to match a time from travelTimes, e.g.: 40m == 2400s
    });

    //  bind the action to the travel time control
    travelTimeControl.onSlideStop(function(){ showPolygons(); });

    // add the newly created control to the map
    map.addControl(travelTimeControl);

    // call the helper function to display polygons with initial value
    showPolygons();

    // helper function to encapsulate the show polygon action
    function showPolygons(){

        // you need to define some options for the polygon service
        // for more travel options check out the other tutorials
        var travelOptions = {
            // we only have one source which is the marker we just added
            sources : [marker],
            // we want to have polygons for 10 minutes and 20 minutes
            travelTimes : travelTimeControl.getValues()
        };

        // call the service
        r360.PolygonService.getTravelTimePolygons(travelOptions, function(polygons){
            
            // in case there are already polygons on the map/layer
            cpl.clearLayers();

            // add the returned polygons to the polygon layer 
            cpl.addLayer(polygons);
            
            // zoom the map to fit the polygons perfectly
            map.fitBounds(cpl.getBoundingBox());
        });
    };
}


function addTravelTypeControl(){

    // add the map and set the initial center to berlin
    var map = L.map('map-addTravelTypeControlExample').setView([52.51, 13.37], 13);

    // attribution to give credit to OSM map data and VBB for public transportation 
    var attribution ="&copy; <a href='http://osm.org/copyright'>OpenStreetMap</a> contributors | ÖPNV Daten © <a href='http://www.vbb.de/de/index.html' target='_blank'>VBB</a> | developed by <a href='http://www.route360.net/de/' target='_blank'>Route360°</a>";

     // initialising the base map. To change the base map just change following lines as described by cloudmade, mapbox etc..
    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: attribution
    }).addTo(map);

    // create a marker and add it to the map
    var marker = L.marker([52.51, 13.37]);
    marker.addTo(map);

    // set the service url, note that this is a development/testing endpoint only
    // we do not guarantuee service uptime at any point
    // r360.config.serviceUrl = 'http://144.76.246.52:8080/api/';

    // create the layer to add the polygons
    var cpl = r360.route360PolygonLayer();
    // add it to the map
    map.addLayer(cpl);

    // add a radio element with all the different transport types
    var buttonOptions = {
        buttons : [
            // each button has a label which is displayed, a key, a tooltip for mouseover events 
            // and a boolean which indicates if the button is selected by default
            { label: 'Cycling', key: 'bike', tooltip: 'Cycling speed is on average 15km/h', checked : false },
            { label: 'Walking', key: 'walk', tooltip: 'Walking speed is on average 5km/h', checked : true },
            { label: 'Car',     key: 'car',  tooltip: 'Car speed is limited by speed limit',     checked : false }
        ]
    };

    // create a new readio button control with the given options
    var travelTypeButtons = r360.radioButtonControl(buttonOptions);

    // add the newly created control to the map
    map.addControl(travelTypeButtons);

    // bind the action to the change event of the radio travel mode element
    travelTypeButtons.onChange(function(value){ showPolygons(); });

    // call the helper function to display polygons with initial value
    showPolygons();

    // helper function to encapsulate the show polygon action
    function showPolygons(){

        // you need to define some options for the polygon service
        // for more travel options check out the other tutorials
        var travelOptions = {
            // we only have one source which is the marker we just added
            sources : [marker],
            // we want to have polygons for 10 minutes and 20 minutes
            travelTimes : [1200,2400,3600],
            // get the selected travel type from the control
            travelMode  : { type : travelTypeButtons.getValue() }
        };

        // call the service
        r360.PolygonService.getTravelTimePolygons(travelOptions, function(polygons){
            
            // in case there are already polygons on the map/layer
            cpl.clearLayers();

            // add the returned polygons to the polygon layer 
            cpl.addLayer(polygons);
            
            // zoom the map to fit the polygons perfectly
            map.fitBounds(cpl.getBoundingBox());
        });
    };
}

function addTravelStartDateControl(){

    // add the map and set the initial center to berlin
    var map = L.map('map-addTravelStartDateControlExample').setView([52.51, 13.37], 13);

    // attribution to give credit to OSM map data and VBB for public transportation 
    var attribution ="&copy; <a href='http://osm.org/copyright'>OpenStreetMap</a> contributors | ÖPNV Daten © <a href='http://www.vbb.de/de/index.html' target='_blank'>VBB</a> | developed by <a href='http://www.route360.net/de/' target='_blank'>Route360°</a>";

     // initialising the base map. To change the base map just change following lines as described by cloudmade, mapbox etc..
    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: attribution
    }).addTo(map);

    // create a marker and add it to the map
    var marker = L.marker([52.51, 13.37]);
    marker.addTo(map);

    // set the service url, note that this is a development/testing endpoint only
    // we do not guarantuee service uptime at any point
    // r360.config.serviceUrl = 'http://144.76.246.52:8080/api/';

    // create the layer to add the polygons
    var cpl = r360.route360PolygonLayer();
    // add it to the map
    map.addLayer(cpl);

    // create a new start date chooser
    var travelStartDateControl = r360.travelStartDateControl();
    var travelStartTimeControl = r360.travelStartTimeControl();
    // add a wait control to the lower left side of the map
    var waitControl = r360.waitControl({ position : 'bottomleft' });

    // add the newly created controls to the map
    map.addControl(waitControl);
    map.addControl(travelStartTimeControl);
    map.addControl(travelStartDateControl);

    // bind the action to the change event of the radio travel mode element
    travelStartDateControl.onChange(function(value){ showPolygons(); });
    travelStartTimeControl.onSlideStop(function(value){ showPolygons(); });

    // call the helper function to display polygons with initial value
    showPolygons();

    // helper function to encapsulate the show polygon action
    function showPolygons(){

        // you need to define some options for the polygon service
        // for more travel options check out the other tutorials
        var travelOptions = {
            // we only have one source which is the marker we just added
            sources : [marker],
            // we want to have polygons for 10 minutes and 20 minutes
            travelTimes : [1200, 2400],
            // we hardcode transit travel type here
            travelMode  : { type : 'transit' },
            // and get the date and time from the controls
            date : travelStartDateControl.getValue(),
            time : travelStartTimeControl.getValue(),
            // give the wait control to let the api display a waiting sign if
            // request take long time, might happen for transit with long travel times
            wait : waitControl
        };

        // call the service
        r360.PolygonService.getTravelTimePolygons(travelOptions, function(polygons){
            
            // in case there are already polygons on the map/layer
            cpl.clearLayers();

            // add the returned polygons to the polygon layer 
            cpl.addLayer(polygons);
            
            // zoom the map to fit the polygons perfectly
            map.fitBounds(cpl.getBoundingBox());
        });
    };
}

function addPlaceAutoCompleteControl(){

    // add the map and set the initial center to berlin
    var map = L.map('map-addPlaceAutoCompleteControlExample', {zoomControl : false}).setView([52.51, 13.37], 13);

    // attribution to give credit to OSM map data and VBB for public transportation 
    var attribution ="&copy; <a href='http://osm.org/copyright'>OpenStreetMap</a> contributors | ÖPNV Daten © <a href='http://www.vbb.de/de/index.html' target='_blank'>VBB</a> | developed by <a href='http://www.route360.net/de/' target='_blank'>Route360°</a>";

     // initialising the base map. To change the base map just change following lines as described by cloudmade, mapbox etc..
    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: attribution
    }).addTo(map);

    // create a marker and but dont add it to the map yet
    var marker;

    // set the service url, note that this is a development/testing endpoint only
    // we do not guarantuee service uptime at any point
    // r360.config.serviceUrl = 'http://144.76.246.52:8080/api/';

    // create the layer to add the polygons
    var cpl = r360.route360PolygonLayer();
    // add it to the map
    map.addLayer(cpl);

    // create an auto complete control and set it to return only german cities, streets etc. 
    var placeAutoComplete = r360.placeAutoCompleteControl({country : "Deutschland", placeholder : 'Select start!'});
    // add the controls to the map
    map.addControl(placeAutoComplete);
    map.addControl(L.control.zoom({ position : 'topright' }));

    // define what happens if someone clicks an item in the autocomplete
    placeAutoComplete.onSelect(function(item){

        // if the source marker is on the map already, move it to the new position
        if ( map.hasLayer(marker) ) marker.setLatLng(item.latlng);
        // otherwise add it
        else marker = L.marker(item.latlng).addTo(map);
        // and show the polygons for the new source
        showPolygons();
    });

    // helper function to encapsulate the show polygon action
    function showPolygons(){

        // you need to define some options for the polygon service
        // for more travel options check out the other tutorials
        var travelOptions = {
            // we only have one source which is the marker we just added
            sources : [marker],
            // we want to have polygons for 10 minutes and 20 minutes
            travelTimes : [1200, 2400],
        };

        // call the service
        r360.PolygonService.getTravelTimePolygons(travelOptions, function(polygons){
            
            // in case there are already polygons on the map/layer
            cpl.clearLayers();

            // add the returned polygons to the polygon layer 
            cpl.addLayer(polygons);
            
            // zoom the map to fit the polygons perfectly
            map.fitBounds(cpl.getBoundingBox());
        });
    };
}


        });
    </script>
</body>

</html>
